 /* ----------------------------------------------------------------------------
 // Ezdz [izy-dizy]
 // v0.4.3 - released 2015-10-01 11:50
 // Licensed under the MIT license.
 // https://github.com/jaysalvat/ezdz
 // ----------------------------------------------------------------------------
 // Copyright (C) 2015 Jay Salvat
 // http://jaysalvat.com/
 // Fixes by Bright
 // http://brightfor.me/
 // ---------------------------------------------------------------------------*/

!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){"use strict";var b={className:"",text:"Drop a file",previewImage:!0,value:null,classes:{main:"ezdz-dropzone",enter:"ezdz-enter",reject:"ezdz-reject",accept:"ezdz-accept",focus:"ezdz-focus"},validators:{maxSize:null,width:null,maxWidth:null,minWidth:null,height:null,maxHeight:null,minHeight:null},init:function(){},enter:function(){},leave:function(){},reject:function(){},accept:function(){},format:function(a){return a}};a.ezdz=function(c,d){this.settings=a.extend(!0,{},b,a.ezdz.defaults,d),this.$input=a(c);var e=this,f=e.settings,g=e.$input;if(g.is('input[type="file"]')&&a.ezdz.isBrowserCompatible()){var h=function(){var b,c,d;c=a('<div class="'+f.classes.main+'" />').on("dragover.ezdz",function(){a(this).addClass(f.classes.enter),a.isFunction(f.enter)&&f.enter.apply(this)}).on("dragleave.ezdz",function(){a(this).removeClass(f.classes.enter),a.isFunction(f.leaved)&&f.leaved.apply(this)}).addClass(f.className),g.wrap(c).before("<div>"+f.text+"</div>"),b=g.parent("."+f.classes.main),d=f.value||g.data("value"),d&&e.preview(d),a.isFunction(f.init)&&f.init.apply(g,[d]),g.on("focus.ezdz",function(){b.addClass(f.classes.focus)}).on("blur.ezdz",function(){b.removeClass(f.classes.focus)}).on("change.ezdz",function(){var c=this.files[0];if(c){var d=c.name.replace(/\\/g,"/").replace(/.*\//,""),e=c.name.split(".").pop(),h=f.format(d);c.extension=e;var i=g.attr("accept"),j=!1,k={mimeType:!1,maxSize:!1,width:!1,minWidth:!1,maxWidth:!1,height:!1,minHeight:!1,maxHeight:!1};if(i){var l=i.split(/[,|]/);a.each(l,function(b,d){if(d=a.trim(d),"."+e===d)return j=!0,!1;if(c.type===d)return j=!0,!1;if(d.indexOf("/*")!==!1){var f=d.replace("/*",""),g=c.type.replace(/(\/.*)$/g,"");if(f===g)return j=!0,!1}}),j===!1&&(k.mimeType=!0)}else j=!0;if(b.removeClass(f.classes.reject+" "+f.classes.accept),j!==!0)return g.val(""),b.addClass(f.classes.reject),a.isFunction(f.reject)&&f.reject.apply(g,[c,k]),!1;if(b.addClass(f.classes.accept),a.isFunction(f.accept)){var m="File was uploaded.";b.find("div").html("<span>"+h+"<br/>"+m+"</span>"),f.accept.apply(g,[c])}}})};h()}},a.ezdz.prototype.preview=function(b,c){var d=this.settings,e=this.$input,f=e.parent("."+d.classes.main),g=b.replace(/\\/g,"/").replace(/.*\//,""),h=d.format(g),i=new Image;i.src=b,i.onload=function(){f.find("div").html(a(i).fadeIn()),a.isFunction(c)&&c.apply(this)},i.onerror=function(){f.find("div").html("<span>"+h+"</span>"),a.isFunction(c)&&c.apply(this)},f.addClass(d.classes.accept)},a.ezdz.prototype.destroy=function(){var a=this.settings,b=this.$input;b.parent("."+a.classes.main).replaceWith(b),b.off("*.ezdz"),b.removeData("ezdz")},a.ezdz.prototype.options=function(b){var c=this.settings;return b?void a.extend(!0,this.settings,b):c},a.ezdz.prototype.container=function(){var a=this.settings,b=this.$input;return b.parent("."+a.classes.main)},a.ezdz.isBrowserCompatible=function(){return!!(window.File&&window.FileList&&window.FileReader)},a.ezdz.defaults=b,a.fn.ezdz=function(b){var c,d=arguments;return this.each(function(){return(c=a(this).data("ezdz"))?c[b]?c[b].apply(c,Array.prototype.slice.call(d,1)):void a.error("Ezdz error - Method "+b+" does not exist."):a(this).data("ezdz",new a.ezdz(this,b))})}});